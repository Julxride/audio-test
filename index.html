<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lecture automatique (Bazooka V2)</title>
</head>
<body style="background-color: black; display: flex; justify-content: center; align-items: center; height: 100vh;">

    <!-- ✅ Image cliquable (au cas où) -->
    <img src="https://i.postimg.cc/vmKWBp55/t-l-chargement.png" 
         alt="Image" 
         style="width: 300px; height: auto; cursor: pointer;" 
         id="playButton">

    <!-- ✅ IFRAME cachée -->
    <iframe id="audioFrame" style="display:none;"></iframe>

    <script>
        function playAudio() {
            console.log("🔫 Tentative de lancement de l'audio...");
            try {
                const iframe = document.getElementById('audioFrame');
                iframe.srcdoc = `
                    <audio id="audioPlayer" autoplay loop>
                        <source src="https://nurykabe.com/stockage/audio/pireEtMeilleur01.mp3" type="audio/mpeg">
                        Ton navigateur ne supporte pas l’audio HTML5.
                    </audio>
                    <script>
                        setTimeout(() => {
                            const audio = document.getElementById('audioPlayer');
                            audio.play().then(() => {
                                console.log('✅ Audio lancé via iframe');
                            }).catch(err => console.warn('🚨 Problème :', err));
                        }, 500);
                    <\/script>
                `;
                console.log("✅ Audio inséré dans l'iframe");
            } catch (error) {
                console.warn("⚠️ Erreur dans l'iframe :", error);
            }
        }

        // ✅ Simulation d'un faux clic utilisateur pour tromper le navigateur
        window.onload = () => {
            console.log("🧙‍♂️ Simulation de clic...");
            setTimeout(() => {
                const btn = document.getElementById('playButton');
                const event = new MouseEvent('click', {
                    bubbles: true,
                    cancelable: true,
                    view: window
                });
                btn.dispatchEvent(event);
                playAudio();
            }, 1000);
        };

    </script>
</body>
</html>
