<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lecture automatique (Bazooka)</title>
</head>
<body style="background-color: black; display: flex; justify-content: center; align-items: center; height: 100vh;">

    <!-- âœ… Image cliquable (au cas oÃ¹) -->
    <img src="https://i.postimg.cc/vmKWBp55/t-l-chargement.png" 
         alt="Image" 
         style="width: 300px; height: auto; cursor: pointer;" 
         id="playButton">

    <!-- âœ… IFRAME invisible pour cacher lâ€™audio -->
    <iframe id="audioFrame" sandbox="allow-scripts" style="display:none;"></iframe>

    <script>
        // âœ… Fonction pour forcer la lecture automatique aprÃ¨s le chargement
        function playAudio() {
            console.log("ğŸ”« Tentative de lancement de l'audio...");
            try {
                // ğŸ¥· CrÃ©e une iframe cachÃ©e qui contient lâ€™audio
                const iframe = document.getElementById('audioFrame');
                iframe.srcdoc = `
                    <audio id="audioPlayer" autoplay loop>
                        <source src="https://nurykabe.com/stockage/audio/pireEtMeilleur01.mp3" type="audio/mpeg">
                        Ton navigateur ne supporte pas lâ€™audio HTML5.
                    </audio>
                    <script>
                        // ğŸ”¥ Contourne la restriction de permission avec un focus
                        setTimeout(() => {
                            const audio = document.getElementById('audioPlayer');
                            audio.play().then(() => {
                                console.log('âœ… Audio lancÃ© via iframe');
                            }).catch(err => console.warn('ğŸš¨ ProblÃ¨me :', err));
                        }, 500);
                    </script>
                `;
                console.log("âœ… Audio insÃ©rÃ© dans l'iframe");
            } catch (error) {
                console.warn("âš ï¸ Erreur dans l'iframe :", error);
            }
        }

        // âœ… Simulation d'un faux clic utilisateur avec une mutation du DOM
        window.onload = () => {
            setTimeout(() => {
                console.log("ğŸ§™â€â™‚ï¸ Simulation de clic...");
                
                // ğŸ”¥ CrÃ©e une mutation DOM pour simuler un vrai Ã©vÃ©nement utilisateur
                const event = new MouseEvent('click', {
                    bubbles: true,
                    cancelable: true,
                    view: window
                });

                document.getElementById('playButton').dispatchEvent(event);

                // âœ… Appelle la fonction pour forcer le lancement audio
                playAudio();

                // âœ… Si le navigateur bloque â†’ backup avec clic manuel
                document.getElementById('playButton').addEventListener('click', () => {
                    const audio = new Audio("https://nurykabe.com/stockage/audio/pireEtMeilleur01.mp3");
                    audio.play();
                    alert("ğŸ”Š Audio activÃ© aprÃ¨s clic !");
                });
            }, 1000); // â³ DÃ©lai de 1 seconde aprÃ¨s le chargement
        };
    </script>

</body>
</html>
